include Sources.mk

CC = cl.exe
CFLAGS = /EHsc /MD /LD
SOURCES = $(MODWORKS_SOURCES)
OUTPUT_LIB = libmodworks.lib
OUTPUT_DLL = ModworksSDK.dll
LIBRARIES = ../lib/libcurl.a ../lib/libcurldll.a ../lib/zlib.lib ../lib/zdll.lib ../lib/pthreadVC2.lib
LIBRARY_GENERATOR = lib.exe

build:
 $(CC) $(CFLAGS) $(SOURCES) /I ../include /link $(LIBRARIES) /SUBSYSTEM:CONSOLE
 
link: *.obj
 $(LIBRARY_GENERATOR) /OUT:$(OUTPUT_LIB) $?

clean:
 del *.obj
 del $(OUTPUT_LIB)
 del $(OUTPUT_DLL)